function getRandomBetween(min,max)
{return Math.random()*(max-min)+min}
Math.getRandomBetween=function(min,max)
{return Math.random()*(max-min)+min}
Math.radians=function(degrees)
{return degrees*Math.PI/180};Math.degrees=function(radians)
{return radians*180/Math.PI};function Vector(x,y)
{this.x=x||0;this.y=y||0}
Vector.prototype.add=function(vector)
{this.x+=vector.x;this.y+=vector.y};Vector.add=function(vector1,vector2)
{return new Vector(vector1.x+vector2.x,vector1.y+vector2.y)};Vector.prototype.sub=function(vector)
{this.x-=vector.x;this.y-=vector.y};Vector.sub=function(vector1,vector2)
{return new Vector(vector1.x-vector2.x,vector1.y-vector2.y)};Vector.dist=function(pointA,pointB)
{return Math.sqrt((pointB.x-pointA.x)*(pointB.x-pointA.x)+(pointB.y-pointA.y)*(pointB.y-pointA.y))};Vector.prototype.getMagnitude=function()
{return Math.sqrt(this.x*this.x+this.y*this.y)};Vector.getMagnitude=function(vector)
{return Math.sqrt(vector.x*vector.x+vector.y*vector.y)};Vector.prototype.normalize=function()
{var mag=this.getMagnitude();this.x/=mag;this.y/=mag};Vector.getNormalizedFrom=function(vector)
{return new Vector(vector.x/vector.getMagnitude(),vector.y/vector.getMagnitude())};Vector.prototype.getAngle=function()
{return Math.atan2(this.y,this.x)};Vector.fromAngle=function(angle,magnitude)
{return new Vector(magnitude*Math.cos(angle),magnitude*Math.sin(angle))};Vector.prototype.mult=function(scalar)
{this.x*=scalar;this.y*=scalar};Vector.mult=function(vector,scalar)
{return new Vector(vector.x*scalar,vector.y*scalar)};Vector.prototype.div=function(scalar)
{this.x/=scalar;this.y/=scalar};Vector.div=function(vector,scalar)
{return new Vector(vector.x/scalar,vector.y/scalar)};Vector.prototype.limit=function(magnitude)
{if(this.getMagnitude()>magnitude)
{this.normalize();this.x*=magnitude;this.y*=magnitude}};Vector.dot=function(vector1,vector2)
{return vector1.x*vector2.x+vector1.y*vector2.y};function SimulationObject(visualrepresentation,mass,radius,location,velocity,acceleration,orientedTowardsMovement=!1)
{this.visualrepresentation=visualrepresentation;this.mass=mass;this.radius=radius*1.0;this.location=location;this.velocity=velocity;this.acceleration=acceleration;this.orientedTowardsMovement=orientedTowardsMovement;this.color="#000000"}
SimulationObject.prototype.update=function(dt)
{this.velocity.add(Vector.mult(this.acceleration,dt));this.location.add(Vector.mult(this.velocity,dt));this.acceleration.x=0;this.acceleration.y=0};SimulationObject.prototype.applyAcceleration=function(acceleration)
{this.acceleration.add(acceleration)};SimulationObject.prototype.applyForce=function(force)
{this.acceleration.add(Vector.div(force,this.mass))};SimulationObject.prototype.display=function(context)
{context.save();context.fillStyle=this.color;if(typeof(this.visualrepresentation)=="string")
{switch(this.visualrepresentation)
    {case "square":context.fillRect(this.location.x-this.radius,this.location.y-this.radius,2*this.radius,2*this.radius);break;case "circle":context.beginPath();context.arc(this.location.x,this.location.y,this.radius,0,2*Math.PI);context.closePath();context.fill();break;case "triangle":context.save();context.transform(1,0,0,1,this.location.x,this.location.y);if(this.orientedTowardsMovement)
    {var theta=Math.atan2(this.velocity.y,this.velocity.x)-Math.atan2(0,1);context.rotate(theta)}
        context.beginPath();context.moveTo(this.radius,0);context.lineTo(-this.radius,-3*this.radius/5);context.lineTo(-this.radius,3*this.radius/5);context.closePath();context.fill();context.restore();break;default:context.beginPath();context.arc(this.location.x,this.location.y,this.radius,0,2*Math.PI,!1);context.closePath();context.fill()}}
else if(this.visualrepresentation instanceof Image)
{context.save();context.transform(1,0,0,1,this.location.x,this.location.y);if(this.orientedTowardsMovement)
{var theta=Math.atan2(this.velocity.y,this.velocity.x)-Math.atan2(0,1);context.rotate(theta)}
    context.drawImage(this.visualrepresentation,-this.radius,-this.radius,2*this.radius,2*this.radius);context.restore()}
else if(this.visualrepresentation instanceof Character)
{this.visualrepresentation.displayAt(context,this.location)}
else{context.beginPath();context.arc(this.location.x,this.location.y,this.radius,0,2*Math.PI);context.closePath();context.fill()}
    context.restore()};function Boid(visualrepresentation,radius,location,velocity,acceleration,maxspeed,maxforce,orientedTowardsMovement=!0)
{SimulationObject.call(this,visualrepresentation,1,radius,location,velocity,acceleration,orientedTowardsMovement);this.maxspeed=maxspeed;this.maxforce=maxforce;this.circleDistance=3*this.radius;this.circleRadius=1.5*this.radius;this.wanderAngle=0}
Boid.prototype=Object.create(SimulationObject.prototype);Boid.prototype.constructor=Boid;Boid.prototype.update=function(dt)
{this.velocity.add(Vector.mult(this.acceleration,dt));this.velocity.limit(this.maxspeed);this.location.add(Vector.mult(this.velocity,dt));this.acceleration.x=0;this.acceleration.y=0};Boid.prototype.flock=function(boids,desiredseparation,neighbourdist,separationWeight,alignmentWeight,cohesionWeight)
{var separation=this.separate(boids,desiredseparation);var alignment=this.align(boids,neighbourdist);var cohesion=this.cohesionate(boids,neighbourdist);separation.mult(separationWeight);alignment.mult(alignmentWeight);cohesion.mult(cohesionWeight);this.applyForce(separation);this.applyForce(alignment);this.applyForce(cohesion)};Boid.prototype.borders=function(minX,maxX,minY,maxY)
{if(this.location.x-this.radius<minX)
{this.location.x=maxX+this.radius}
    if(this.location.y-this.radius<minY)
    {this.location.y=maxY+this.radius}
    if(this.location.x>maxX+this.radius)
    {this.location.x=minX+this.radius}
    if(this.location.y>maxY+this.radius)
    {this.location.y=minY+this.radius}};Boid.prototype.separate=function(boids,desiredseparation)
{var steer=new Vector(0,0);var count=0;for(var i=0;i<boids.length;i++)
{var d=Vector.dist(this.location,boids[i].location);if(d>0&&d<desiredseparation)
{var diff=Vector.sub(this.location,boids[i].location);diff.normalize();diff.div(d);steer.add(diff);count ++}}
    if(count>0)
    {steer.div(count)}
    if(steer.getMagnitude()>0)
    {steer.normalize();steer.mult(this.maxspeed);steer.sub(this.velocity);steer.limit(this.maxforce)}
    return steer};Boid.prototype.align=function(boids,neighbourdist)
{var sum=new Vector(0,0);var count=0;for(var i=0;i<boids.length;i++)
{var d=Vector.dist(this.location,boids[i].location);if(d>0&&d<neighbourdist)
{sum.add(boids[i].velocity);count ++}}
    if(count>0)
    {sum.div(count);sum.normalize();sum.mult(this.maxspeed);var steer=Vector.sub(sum,this.velocity);steer.limit(this.maxforce);return steer}
    else{return new Vector(0,0)}};Boid.prototype.cohesionate=function(boids,neighbourdist)
{var sum=new Vector(0,0);var count=0;for(var i=0;i<boids.length;i++)
{var d=Vector.dist(this.location,boids[i].location);if(d>0&&d<neighbourdist)
{sum.add(boids[i].location);count ++}}
    if(count>0)
    {sum.div(count);return this.seek(sum)}
    else{return new Vector(0,0)}};Boid.prototype.seek=function(target)
{var desired=Vector.sub(target,this.location);desired.normalize();desired.mult(this.maxspeed);var steer=Vector.sub(desired,this.velocity);steer.limit(this.maxforce);return steer};Boid.prototype.seekIfNear=function(target,distance)
{if(Vector.dist(this.location,target)<=distance)
{return this.seek(target)}
    else{return new Vector()}};Boid.seek=function(boid,target)
{var desired=Vector.sub(target,boid.location);desired.normalize();desired.mult(boid.maxspeed);var steer=Vector.sub(desired,boid.velocity);steer.limit(boid.maxforce);return steer};Boid.prototype.pursue=function(target,dt)
{var predictedLocation=Vector.add(target.location,Vector.mult(target.velocity,dt));return this.seek(predictedLocation)};Boid.prototype.pursueIfNear=function(target,distance,dt)
{var predictedLocation=Vector.add(target.location,Vector.mult(target.velocity,dt));if(Vector.dist(this.location,target.location)<=distance)
{return this.seek(predictedLocation)}
    else{return new Vector()}};Boid.prototype.flee=function(target)
{var steer=this.seek(target);steer.mult(-1);return steer};Boid.prototype.fleeIfNear=function(target,distance)
{if(Vector.dist(this.location,target)<=distance)
{return this.flee(target)}
    else{return new Vector()}};Boid.prototype.evade=function(target,dt)
{var predictedLocation=Vector.add(target.location,Vector.mult(target.velocity,dt));return this.flee(predictedLocation)};Boid.prototype.evadeIfNear=function(target,distance,dt)
{var predictedLocation=Vector.add(target.location,Vector.mult(target.velocity,dt));if(Vector.dist(this.location,predictedLocation)<=distance)
{return this.flee(predictedLocation)}
    else{return new Vector()}};Boid.prototype.wander=function()
{var circlePosition=new Vector(this.velocity.x,this.velocity.y);if(circlePosition.getMagnitude()==0)
{circlePosition.x=1;circlePosition.y=0}
else{circlePosition.normalize()}
    circlePosition.mult(this.circleDistance);this.wanderAngle+=getRandomBetween(-0.3,0.3);var displacement=new Vector(this.circleRadius*Math.cos(this.wanderAngle),this.circleRadius*Math.sin(this.wanderAngle));var desired=Vector.add(circlePosition,displacement);desired.normalize();desired.mult(this.maxspeed);var steer=Vector.sub(desired,this.velocity);steer.limit(this.maxforce);return steer};function Flock(desiredseparation=25.0,neighbourdist=50.0,separationWeight=1.5,alignmentWeight=1.0,cohesionWeight=1.0)
{this.boids=[];this.desiredseparation=desiredseparation;this.neighbourdist=neighbourdist;this.separationWeight=separationWeight;this.alignmentWeight=alignmentWeight;this.cohesionWeight=cohesionWeight;this.obstacles=[];this.predators=[];this.safeDistance=200;this.fleeingWeight=1;this.evasionWeight=1}
Flock.desiredseparationtoradiusratio=5.0;Flock.neighbourdistancetoradiusratio=10.0;Flock.prototype.run=function(dt,minX,maxX,minY,maxY)
{for(var i=0;i<this.boids.length;i++)
{this.boids[i].flock(this.boids,this.desiredseparation,this.neighbourdist,this.separationWeight,this.alignmentWeight,this.cohesionWeight);for(var j=0;j<this.predators.length;j++)
{var evade=this.boids[i].evadeIfNear(this.predators[j],this.safeDistance);evade.mult(this.evasionWeight);this.boids[i].applyForce(evade)}
    for(var j=0;j<this.obstacles.length;j++)
    {var flee=this.boids[i].fleeIfNear(this.predators[j],this.safeDistance);flee.mult(this.fleeingWeight);this.boids[i].applyForce(flee)}
    this.boids[i].update(dt);this.boids[i].borders(minX,maxX,minY,maxY)}};Flock.prototype.display=function(context)
{for(var i=0;i<this.boids.length;i++)
{this.boids[i].display(context)}};Flock.prototype.addBoid=function(b)
{this.boids.push(b)};Flock.prototype.boidSizeChange=function(size)
{for(var i=0;i<this.boids.length;i++)
{this.boids[i].radius=1.0*size;this.boids[i].circleDistance=3.0*size;this.boids[i].circleRadius=1.5*size}
    this.desiredseparation=size*Flock.desiredseparationtoradiusratio;this.neighbourdist=size*Flock.neighbourdistancetoradiusratio};function RigidBox(mass,size,location,velocity,acceleration)
{SimulationObject.call(this,"circle",mass,(size.x+size.y)/2,location,velocity,acceleration,!1);this.size=size;this.angularVelocity=0;this.angularAcceleration=0;this.angle=0;this.momentOfInertia=mass*(size.x*size.x+size.y*size.y)/12;this.points=[];this.points.push(new Vector(-size.x/2,size.y/2));this.points.push(new Vector(size.x/2,size.y/2));this.points.push(new Vector(size.x/2,-size.y/2));this.points.push(new Vector(-size.x/2,-size.y/2));this.rotatedPoints=[];this.rotatedPoints.push(new Vector(this.points[0].x*Math.cos(this.angle)-this.points[0].y*Math.sin(this.angle),this.points[0].x*Math.sin(this.angle)+this.points[0].y*Math.cos(this.angle)));this.rotatedPoints.push(new Vector(this.points[1].x*Math.cos(this.angle)-this.points[1].y*Math.sin(this.angle),this.points[1].x*Math.sin(this.angle)+this.points[1].y*Math.cos(this.angle)));this.rotatedPoints.push(new Vector(this.points[2].x*Math.cos(this.angle)-this.points[2].y*Math.sin(this.angle),this.points[2].x*Math.sin(this.angle)+this.points[2].y*Math.cos(this.angle)));this.rotatedPoints.push(new Vector(this.points[3].x*Math.cos(this.angle)-this.points[3].y*Math.sin(this.angle),this.points[3].x*Math.sin(this.angle)+this.points[3].y*Math.cos(this.angle)));this.pointVolume=this.size.x*this.size.y*(this.size.x+this.size.y)/2/this.points.length;this.pointMass=this.mass/this.points.length}
RigidBox.prototype=Object.create(SimulationObject.prototype);RigidBox.prototype.constructor=RigidBox;RigidBox.prototype.applyForce=function(force)
{this.acceleration.add(Vector.div(force,this.mass))};RigidBox.prototype.applyForceTo=function(force,point)
{this.acceleration.add(Vector.div(force,this.mass));var torque=0;if(typeof(point)==="number")
{torque=this.rotatedPoints[point].x*force.y-this.rotatedPoints[point].y*force.x}
else if(typeof(point)==="object"&&!(typeof(point)==="undefined"))
{if(point!=null)
{torque=point.x*force.y-point.y*force.x}}
    this.angularAcceleration+=torque/this.momentOfInertia};RigidBox.prototype.applyFlotationForces=function(gravity,liquidDensity,sealevel)
{var flotationForce=Vector.mult(gravity,-liquidDensity*this.pointVolume);for(var i=0;i<this.points.length;i++)
{if(this.location.y+this.rotatedPoints[i].y>sealevel)
{this.applyForce(flotationForce);var torque=this.rotatedPoints[i].x*flotationForce.y-this.rotatedPoints[i].y*flotationForce.x;this.angularAcceleration+=torque/this.momentOfInertia;var friction=Vector.mult(this.velocity,-0.5);this.applyAcceleration(friction);var angularFriction=Vector.mult(this.angularVelocity,-0.8);torque=this.rotatedPoints[i].x*angularFriction.y-this.rotatedPoints[i].y*angularFriction.x;this.angularAcceleration+=torque}}};RigidBox.prototype.update=function(dt)
{this.velocity.add(Vector.mult(this.acceleration,dt));this.location.add(Vector.mult(this.velocity,dt));this.acceleration.x=0;this.acceleration.y=0;this.angularVelocity+=this.angularAcceleration*dt;this.angle+=this.angularVelocity*dt;for(var i=0;i<this.points.length;i++)
{this.rotatedPoints[i].x=this.points[i].x*Math.cos(this.angle)-this.points[i].y*Math.sin(this.angle);this.rotatedPoints[i].y=this.points[i].x*Math.sin(this.angle)+this.points[i].y*Math.cos(this.angle)}
    this.angularAcceleration=0};RigidBox.prototype.display=function(context)
{context.save();context.strokeStyle="#000000";context.fillStyle=this.color;context.translate(this.location.x,this.location.y);context.save();context.rotate(this.angle);context.fillRect(-this.size.x/2,-this.size.y/2,this.size.x,this.size.y);context.restore();context.beginPath();context.moveTo(this.rotatedPoints[0].x,this.rotatedPoints[0].y);context.lineTo(this.rotatedPoints[1].x,this.rotatedPoints[1].y);context.lineTo(this.rotatedPoints[2].x,this.rotatedPoints[2].y);context.lineTo(this.rotatedPoints[3].x,this.rotatedPoints[3].y);context.closePath();context.stroke();context.restore()};function RigidLetter(character,font,mass,fontSize,location,velocity,acceleration)
{RigidBox.call(this,mass,new Vector(fontSize,fontSize),location,velocity,acceleration);var gridSize=10;this.points=RigidLetter.getPointsForRBD(character,font,fontSize,gridSize);this.letterLocation=this.points.pop();this.rotatedPoints=[];for(let i=0;i<this.points.length;i++)
{this.rotatedPoints.push(new Vector(this.points[i].x,this.points[i].y))}
    var minX=this.points[0].x,maxX=this.points[0].x,minY=this.points[0].y,maxY=this.points[0].y;for(let i=1;i<this.points.length;i++)
    {if(this.points[i].x<minX)
        minX=this.points[i].x;else if(this.points[i].x>maxX)
            maxX=this.points[i].x;if(this.points[i].y<minY)
                minY=this.points[i].y;else if(this.points[i].y>maxY)
                    maxY=this.points[i].y}
    gridSize*=fontSize/100;this.size=new Vector(maxX-minX+gridSize,maxY-minY+gridSize);this.pointVolume=gridSize*gridSize*gridSize;this.pointMass=this.mass/this.points.length;this.letter=character;this.font=fontSize+"px "+font}
RigidLetter.prototype=Object.create(RigidBox.prototype);RigidLetter.prototype.constructor=RigidLetter;RigidLetter.getPointsForRBD=function(character,font,fontSize,gridSize=10)
{var canvas=document.createElement("canvas");canvas.width=100;canvas.height=150;var context=canvas.getContext("2d");context.font="100px "+font;context.fillStyle="#000000";context.fillText(character,20,100);var points=[];var centerOfMass=new Vector();for(var i=gridSize/2;i<100;i+=gridSize)
{for(var j=gridSize/2;j<150;j+=gridSize)
{if(context.getImageData(i,j,1,1).data[3]>0)
{points.push(new Vector(i,j));centerOfMass.x+=i;centerOfMass.y+=j}}}
    if(points.length==0)points.push(new Vector());centerOfMass.div(points.length);for(let i=0;i<points.length;i++)
    {points[i].sub(centerOfMass);points[i].mult(fontSize/100)}
    var offsetForDrawing=new Vector(20-centerOfMass.x,100-centerOfMass.y);offsetForDrawing.mult(fontSize/100);points.push(offsetForDrawing);return points}
RigidLetter.prototype.display=function(context)
{context.save();context.translate(this.location.x,this.location.y);context.rotate(this.angle);context.fillStyle=this.color;context.font=this.font;context.fillText(this.letter,this.letterLocation.x,this.letterLocation.y);context.restore()};function Spring(origin,particle,length,stiffness,damping)
{this.origin=origin;this.particle=particle;this.length=length;this.stiffness=stiffness;this.damping=1-0.1*damping;this.color="#000000"}
Spring.prototype.applySpringForcesToParticle=function()
{var dist=(this.origin instanceof Vector)?Vector.sub(this.origin,this.particle.location):Vector.sub(this.origin.location,this.particle.location);var normDist=Vector.getNormalizedFrom(dist);normDist.mult(this.length);dist.sub(normDist);var springForce=Vector.mult(dist,this.stiffness);this.particle.applyForce(springForce);this.particle.velocity.mult(this.damping)};Spring.prototype.applySpringForcesToBothParticles=function()
{var dist=Vector.sub(this.origin.location,this.particle.location);var normDist=Vector.getNormalizedFrom(dist);normDist.mult(this.length);dist.sub(normDist);var springForce=Vector.mult(dist,this.stiffness);this.particle.applyForce(Vector.mult(springForce,0.5));this.particle.velocity.mult(this.damping);this.origin.applyForce(Vector.mult(springForce,-0.5));this.origin.velocity.mult(this.damping)};Spring.prototype.display=function(context)
{context.save();context.strokeStyle=this.color;context.beginPath();context.moveTo(this.particle1.location.x,this.particle1.location.y);context.lineTo(this.particle2.location.x,this.particle2.location.y);context.closePath();context.stroke();context.restore()};function Character(character,font,size,color)
{this.character=character;this.font=font;this.size=size;this.color=color;var canvas=document.createElement("canvas");canvas.width=100;canvas.height=150;var context=canvas.getContext("2d");context.font="100px "+font;context.fillStyle="#000000";context.fillText(character,20,100);var gridSize=10;var numberOfPoints=0;var centerOfMass=new Vector();for(var i=gridSize/2;i<100;i+=gridSize)
{for(var j=gridSize/2;j<150;j+=gridSize)
{if(context.getImageData(i,j,1,1).data[3]>0)
{centerOfMass.add(new Vector(i,j));numberOfPoints ++}}}
    centerOfMass.div(numberOfPoints);this.offsetForDrawing=new Vector(20-centerOfMass.x,100-centerOfMass.y);this.offsetForDrawing.mult(size/100)}
Character.prototype.display=function(context)
{context.save();context.font=this.size+"px "+this.font;context.fillStyle=this.color;context.fillText(this.character,this.offsetForDrawing.x,this.offsetForDrawing.y);context.restore()};Character.prototype.displayAt=function(context,location)
{context.save();context.font=this.size+"px "+this.font;context.fillStyle=this.color;context.fillText(this.character,location.x+this.offsetForDrawing.x,location.y+this.offsetForDrawing.y);context.restore()};function offset(el)
{var rect=el.getBoundingClientRect(),scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:rect.top+scrollTop,left:rect.left+scrollLeft}}
function SpringsAnimation(canvas,EDITMODE=!1)
{this.canvas=canvas;this.context=canvas.getContext("2d");this.springs;this.letters;this.EDITMODE;this.GRID;this.textlocation;this.SHOWTEXT;this.POSITIONINGMODE;this.scenewidth;this.dt=0.02;this.size;this.mass;this.stiffness;this.damping;this.text;this.mousePos=new Vector();this.letterlocations;this.font;this.color;this.canvas.easyPhysicsMousePos=this.mousePos;this.canvas.addEventListener("mousemove",function(e){e.target.MOUSEOVERCANVAS=!0;e.target.easyPhysicsMousePos.x=e.clientX-offset(e.target).left;e.target.easyPhysicsMousePos.y=e.clientY-offset(e.target).top});this.canvas.addEventListener("mouseout",function(e){e.target.MOUSEOVERCANVAS=!1});this.initParams(EDITMODE);this.initSimulation()}
SpringsAnimation.prototype.initParams=function(EDITMODE=!1,settings)
{this.EDITMODE=EDITMODE;this.GRID=EDITMODE;this.textlocation=new Vector();this.SHOWTEXT=EDITMODE;this.POSITIONINGMODE=!1;this.scenewidth=11;this.size=1;this.mass=1;this.stiffness=150;this.damping=3;this.text="Easy Physics";this.letterlocations=[];for(let i=0;i<this.text.length;i++)
{this.letterlocations.push(new Vector(i*0.5,0))}
    this.font="Arial";this.color="#000000";if(typeof eptfgSettingsSprings!=="undefined")
    {if(typeof eptfgSettingsSprings.EDITMODE!=="undefined")
    {if(eptfgSettingsSprings.EDITMODE=="true")
    {this.EDITMODE=!0}
    else if(eptfgSettingsSprings.EDITMODE=="false")
    {this.EDITMODE=!1}}
        if(typeof eptfgSettingsSprings.GRID!=="undefined")
        {if(eptfgSettingsSprings.GRID=="true")
        {this.GRID=!0}
        else if(eptfgSettingsSprings.GRID=="false")
        {this.GRID=!1}}
        this.textlocation.x=(typeof eptfgSettingsSprings.textlocationX!=="undefined")?(1.0*eptfgSettingsSprings.textlocationX):this.textlocation.x;this.textlocation.y=(typeof eptfgSettingsSprings.textlocationY!=="undefined")?(1.0*eptfgSettingsSprings.textlocationY):this.textlocation.y;if(typeof eptfgSettingsSprings.SHOWTEXT!=="undefined")
        {if(eptfgSettingsSprings.SHOWTEXT=="true")
        {this.SHOWTEXT=!0}
        else if(eptfgSettingsSprings.SHOWTEXT=="false")
        {this.SHOWTEXT=!1}}
        if(typeof eptfgSettingsSprings.POSITIONINGMODE!=="undefined")
        {if(eptfgSettingsSprings.POSITIONINGMODE=="true")
        {this.POSITIONINGMODE=!0}
        else if(eptfgSettingsSprings.POSITIONINGMODE=="false")
        {this.POSITIONINGMODE=!1}}
        this.scenewidth=(typeof eptfgSettingsSprings.scenewidth!=="undefined")?(1.0*eptfgSettingsSprings.scenewidth):this.scenewidth;this.size=(typeof eptfgSettingsSprings.size!=="undefined")?(1*eptfgSettingsSprings.size):this.size;this.mass=(typeof eptfgSettingsSprings.mass!=="undefined")?(1.0*eptfgSettingsSprings.mass):this.mass;this.stiffness=(typeof eptfgSettingsSprings.stiffness!=="undefined")?(1.0*eptfgSettingsSprings.stiffness):this.stiffness;this.damping=(typeof eptfgSettingsSprings.damping!=="undefined")?(1.0*eptfgSettingsSprings.damping):this.damping;this.text=(typeof eptfgSettingsSprings.text!=="undefined")?eptfgSettingsSprings.text:this.text;for(var i=0;i<this.text.length;i++)
        {this.letterlocations[i]=new Vector((typeof eptfgSettingsSprings["letterlocation"+i+"x"]!=="undefined")?(1.0*eptfgSettingsSprings["letterlocation"+i+"x"]):this.letterlocations[i].x,(typeof eptfgSettingsSprings["letterlocation"+i+"y"]!=="undefined")?(1.0*eptfgSettingsSprings["letterlocation"+i+"y"]):this.letterlocations[i].y)}
        this.font=(typeof eptfgSettingsSprings.font!=="undefined")?eptfgSettingsSprings.font:this.font;this.color=(typeof eptfgSettingsSprings.color!=="undefined")?eptfgSettingsSprings.color:this.color}
    if(typeof settings!=="undefined")
    {this.scenewidth=(typeof settings.scenewidth!=="undefined")?settings.scenewidth:this.scenewidth;this.size=(typeof settings.size!=="undefined")?settings.size:this.size;this.mass=(typeof settings.mass!=="undefined")?settings.mass:this.mass;this.stiffness=(typeof settings.stiffness!=="undefined")?settings.stiffness:this.stiffness;this.damping=(typeof settings.damping!=="undefined")?settings.damping:this.damping;this.text=(typeof settings.text!=="undefined")?settings.text:this.text;this.letterlocations=(typeof settings.letterlocations!=="undefined")?settings.letterlocations:this.letterlocations;this.font=(typeof settings.font!=="undefined")?settings.font:this.font;this.color=(typeof settings.color!=="undefined")?settings.color:this.color}};SpringsAnimation.prototype.initSimulation=function()
{this.letters=[];this.springs=[];for(let i=0;i<this.text.length;i++)
{this.letters.push(new SimulationObject(new Character(this.text[i],this.font,this.size,this.color),this.mass,this.size,new Vector(this.letterlocations[i].x,this.letterlocations[i].y),new Vector(),new Vector(),!1));this.letters[i].color=this.color;this.letters[i].visualrepresentation.color=this.color;this.springs.push(new Spring(new Vector(this.letterlocations[i].x,this.letterlocations[i].y),this.letters[i],0,this.stiffness,this.damping))}};SpringsAnimation.prototype.draw=function()
{this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.save();var zoom=this.canvas.width/this.scenewidth;this.context.setTransform(zoom,0,0,zoom,this.canvas.width/2,this.canvas.height/2);if(this.GRID)SpringsAnimation.drawGrid(this.context);if(this.SHOWTEXT)
{this.context.save();this.context.fillStyle="#000000";this.context.font=this.size+"px "+this.font;this.context.fillText(this.text,this.textlocation.x,this.textlocation.y);this.context.restore()}
    if(this.POSITIONINGMODE)
    {for(var i=0;i<this.letters.length;i++)
    {this.letters[i].display(this.context);this.context.save();this.context.fillStyle="#000000";this.context.globalAlpha=0.7;this.context.beginPath();this.context.arc(this.letters[i].location.x,this.letters[i].location.y,0.2*this.letters[i].visualrepresentation.size,0,2*Math.PI);this.context.closePath();this.context.fill();this.context.restore()}
        if(this.SHOWTEXT)
        {this.context.save();this.context.fillStyle="#000000";this.context.globalAlpha=0.7;this.context.beginPath();this.context.arc(this.textlocation.x,this.textlocation.y,0.2*this.size,0,2*Math.PI);this.context.closePath();this.context.fill();this.context.restore()}}
    else{var mousePos=Vector.sub(this.mousePos,new Vector(this.canvas.width/2,this.canvas.height/2));mousePos.div(zoom);for(var i=0;i<this.springs.length;i++)
    {this.springs[i].applySpringForcesToParticle()}
        for(var i=0;i<this.letters.length;i++)
        {if(this.canvas.MOUSEOVERCANVAS&&Vector.dist(this.letters[i].location,mousePos)<this.size)
        {var direction=Vector.sub(this.letters[i].location,mousePos);direction.normalize();direction.mult(100*this.letters[i].radius);this.letters[i].applyForce(direction)}
            this.letters[i].update(this.dt);this.letters[i].display(this.context)}}
    this.context.restore();if(this.EDITMODE)
    {this.context.save();this.context.globalAlpha=1;this.context.strokeStyle="#000000";this.context.lineWidth=2;this.context.beginPath();this.context.moveTo(this.canvas.width-15,this.canvas.height-3);this.context.lineTo(this.canvas.width-3,this.canvas.height-3);this.context.lineTo(this.canvas.width-3,this.canvas.height-15);this.context.moveTo(this.canvas.width-15,this.canvas.height-8);this.context.lineTo(this.canvas.width-8,this.canvas.height-8);this.context.lineTo(this.canvas.width-8,this.canvas.height-15);this.context.stroke();this.context.restore()}};SpringsAnimation.drawGrid=function(context)
{context.save();context.lineWidth=0.025;context.beginPath();context.moveTo(-10,0);context.lineTo(10,0);context.stroke();context.beginPath();context.moveTo(0,-10);context.lineTo(0,10);context.stroke();context.beginPath();context.moveTo(-0.25,-10);context.lineTo(0.25,-10);context.moveTo(-0.25,-9);context.lineTo(0.25,-9);context.moveTo(-0.25,-8);context.lineTo(0.25,-8);context.moveTo(-0.25,-7);context.lineTo(0.25,-7);context.moveTo(-0.25,-6);context.lineTo(0.25,-6);context.moveTo(-0.25,-5);context.lineTo(0.25,-5);context.moveTo(-0.25,-4);context.lineTo(0.25,-4);context.moveTo(-0.25,-3);context.lineTo(0.25,-3);context.moveTo(-0.25,-2);context.lineTo(0.25,-2);context.moveTo(-0.25,-1);context.lineTo(0.25,-1);context.moveTo(-0.25,1);context.lineTo(0.25,1);context.moveTo(-0.25,2);context.lineTo(0.25,2);context.moveTo(-0.25,3);context.lineTo(0.25,3);context.moveTo(-0.25,4);context.lineTo(0.25,4);context.moveTo(-0.25,5);context.lineTo(0.25,5);context.moveTo(-0.25,6);context.lineTo(0.25,6);context.moveTo(-0.25,7);context.lineTo(0.25,7);context.moveTo(-0.25,8);context.lineTo(0.25,8);context.moveTo(-0.25,9);context.lineTo(0.25,9);context.moveTo(-0.25,10);context.lineTo(0.25,10);context.stroke();context.beginPath();context.moveTo(-10,-0.25);context.lineTo(-10,0.25);context.moveTo(-9,-0.25);context.lineTo(-9,0.25);context.moveTo(-8,-0.25);context.lineTo(-8,0.25);context.moveTo(-7,-0.25);context.lineTo(-7,0.25);context.moveTo(-6,-0.25);context.lineTo(-6,0.25);context.moveTo(-5,-0.25);context.lineTo(-5,0.25);context.moveTo(-4,-0.25);context.lineTo(-4,0.25);context.moveTo(-3,-0.25);context.lineTo(-3,0.25);context.moveTo(-2,-0.25);context.lineTo(-2,0.25);context.moveTo(-1,-0.25);context.lineTo(-1,0.25);context.moveTo(1,-0.25);context.lineTo(1,0.25);context.moveTo(2,-0.25);context.lineTo(2,0.25);context.moveTo(3,-0.25);context.lineTo(3,0.25);context.moveTo(4,-0.25);context.lineTo(4,0.25);context.moveTo(5,-0.25);context.lineTo(5,0.25);context.moveTo(6,-0.25);context.lineTo(6,0.25);context.moveTo(7,-0.25);context.lineTo(7,0.25);context.moveTo(8,-0.25);context.lineTo(8,0.25);context.moveTo(9,-0.25);context.lineTo(9,0.25);context.moveTo(10,-0.25);context.lineTo(10,0.25);context.stroke();context.beginPath();context.moveTo(-0.9,-0.1);context.lineTo(-0.9,0.1);context.moveTo(-0.8,-0.1);context.lineTo(-0.8,0.1);context.moveTo(-0.7,-0.1);context.lineTo(-0.7,0.1);context.moveTo(-0.6,-0.1);context.lineTo(-0.6,0.1);context.moveTo(-0.5,-0.1);context.lineTo(-0.5,0.1);context.moveTo(-0.4,-0.1);context.lineTo(-0.4,0.1);context.moveTo(-0.3,-0.1);context.lineTo(-0.3,0.1);context.moveTo(-0.2,-0.1);context.lineTo(-0.2,0.1);context.moveTo(-0.1,-0.1);context.lineTo(-0.1,0.1);context.moveTo(0.1,-0.1);context.lineTo(0.1,0.1);context.moveTo(0.2,-0.1);context.lineTo(0.2,0.1);context.moveTo(0.3,-0.1);context.lineTo(0.3,0.1);context.moveTo(0.4,-0.1);context.lineTo(0.4,0.1);context.moveTo(0.5,-0.1);context.lineTo(0.5,0.1);context.moveTo(0.6,-0.1);context.lineTo(0.6,0.1);context.moveTo(0.7,-0.1);context.lineTo(0.7,0.1);context.moveTo(0.8,-0.1);context.lineTo(0.8,0.1);context.moveTo(0.9,-0.1);context.lineTo(0.9,0.1);context.lineWidth=0.01;context.stroke();context.restore()};function FloatingAnimation(canvas,EDITMODE=!1)
{this.canvas=canvas;this.context=canvas.getContext("2d");this.letters;this.EDITMODE;this.GRID;this.scenewidth;this.waterline;this.dt=0.01;this.size;this.gravity;this.mass;this.liquidDensity;this.text;this.font;this.color;this.liquidColor;this.liquidOpacity;this.initParams(EDITMODE);this.initSimulation()}
FloatingAnimation.prototype.initParams=function(EDITMODE=!1,settings)
{this.EDITMODE=EDITMODE;this.GRID=EDITMODE;this.scenewidth=5;this.waterline=0;this.gravity=new Vector(0,9.8);this.size=1;this.mass=5;this.liquidDensity=1000;this.text="Easy Physics";this.font="Arial";this.color="#000000";this.liquidColor="#0000FF";this.liquidOpacity=0.7;if(typeof eptfgSettingsFloating!=="undefined")
{if(typeof eptfgSettingsFloating.EDITMODE!=="undefined")
{if(eptfgSettingsFloating.EDITMODE=="true")
{this.EDITMODE=!0}
else if(eptfgSettingsFloating.EDITMODE=="false")
{this.EDITMODE=!1}}
    if(typeof eptfgSettingsFloating.GRID!=="undefined")
    {if(eptfgSettingsFloating.GRID=="true")
    {this.GRID=!0}
    else if(eptfgSettingsFloating.GRID=="false")
    {this.GRID=!1}}
    this.scenewidth=(typeof eptfgSettingsFloating.scenewidth!=="undefined")?(1.0*eptfgSettingsFloating.scenewidth):this.scenewidth;this.waterline=(typeof eptfgSettingsFloating.waterline!=="undefined")?(-1.0*eptfgSettingsFloating.waterline):this.waterline;this.gravity.y=(typeof eptfgSettingsFloating.gravity!=="undefined")?(1.0*eptfgSettingsFloating.gravity):this.gravity.y;this.size=(typeof eptfgSettingsFloating.size!=="undefined")?(1*eptfgSettingsFloating.size):this.size;this.mass=(typeof eptfgSettingsFloating.mass!=="undefined")?(1.0*eptfgSettingsFloating.mass):this.mass;this.liquidDensity=(typeof eptfgSettingsFloating.liquiddensity!=="undefined")?(1.0*eptfgSettingsFloating.liquiddensity):this.liquidDensity;this.text=(typeof eptfgSettingsFloating.text!=="undefined")?eptfgSettingsFloating.text:this.text;this.font=(typeof eptfgSettingsFloating.font!=="undefined")?eptfgSettingsFloating.font:this.font;this.color=(typeof eptfgSettingsFloating.color!=="undefined")?eptfgSettingsFloating.color:this.color;this.liquidColor=(typeof eptfgSettingsFloating.liquidcolor!=="undefined")?eptfgSettingsFloating.liquidcolor:this.liquidColor;this.liquidOpacity=(typeof eptfgSettingsFloating.liquidopacity!=="undefined")?(1.0*eptfgSettingsFloating.liquidopacity):this.liquidOpacity}
    if(typeof settings!=="undefined")
    {this.scenewidth=(typeof settings.scenewidth!=="undefined")?settings.scenewidth:this.scenewidth;this.waterline=(typeof settings.waterline!=="undefined")?settings.waterline:this.waterline;this.gravity=(typeof settings.gravity!=="undefined")?settings.gravity:this.gravity;this.size=(typeof settings.size!=="undefined")?settings.size:this.size;this.mass=(typeof settings.mass!=="undefined")?settings.mass:this.mass;this.liquidDensity=(typeof settings.liquidDensity!=="undefined")?settings.liquidDensity:this.liquidDensity;this.text=(typeof settings.text!=="undefined")?settings.text:this.text;this.font=(typeof settings.font!=="undefined")?settings.font:this.font;this.color=(typeof settings.color!=="undefined")?settings.color:this.color;this.liquidColor=(typeof settings.liquidColor!=="undefined")?settings.liquidColor:this.liquidColor;this.liquidOpacity=(typeof settings.liquidOpacity!=="undefined")?settings.liquidOpacity:this.liquidOpacity}};FloatingAnimation.prototype.initSimulation=function()
{this.letters=[];for(let i=0;i<this.text.length;i++)
{this.letters.push(new RigidLetter(this.text[i],this.font,this.mass,this.size,new Vector(getRandomBetween(-0.8*this.scenewidth/2,0.8*this.scenewidth/2),getRandomBetween(-0.8*this.scenewidth*this.canvas.height/this.canvas.width/2,0.8*this.scenewidth*this.canvas.height/this.canvas.width/2)),new Vector(getRandomBetween(-2,2),getRandomBetween(-1.5,1.5)),new Vector()));this.letters[i].color=this.color;this.letters[i].angularVelocity=getRandomBetween(-1,1)}};FloatingAnimation.prototype.draw=function()
{this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.save();var zoom=this.canvas.width/this.scenewidth;this.context.setTransform(zoom,0,0,zoom,this.canvas.width/2,this.canvas.height/2);if(this.GRID)FloatingAnimation.drawGrid(this.context);for(let i=0;i<this.letters.length;i++)
{this.letters[i].applyAcceleration(this.gravity);this.letters[i].applyFlotationForces(this.gravity,this.liquidDensity,this.waterline);this.letters[i].update(this.dt);this.letters[i].display(this.context)}
    this.context.save();this.context.globalAlpha=this.liquidOpacity;this.context.fillStyle=this.liquidColor;this.context.fillRect(zoom*(-this.canvas.width/2),this.waterline,zoom*this.canvas.width,this.scenewidth*this.canvas.height/this.canvas.width/2-this.waterline);this.context.restore();this.context.restore();if(this.EDITMODE)
    {this.context.save();this.context.globalAlpha=1;this.context.strokeStyle="#000000";this.context.lineWidth=2;this.context.beginPath();this.context.moveTo(this.canvas.width-15,this.canvas.height-3);this.context.lineTo(this.canvas.width-3,this.canvas.height-3);this.context.lineTo(this.canvas.width-3,this.canvas.height-15);this.context.moveTo(this.canvas.width-15,this.canvas.height-8);this.context.lineTo(this.canvas.width-8,this.canvas.height-8);this.context.lineTo(this.canvas.width-8,this.canvas.height-15);this.context.stroke();this.context.restore()}};FloatingAnimation.drawGrid=function(context)
{context.save();context.lineWidth=0.025;context.beginPath();context.moveTo(-10,0);context.lineTo(10,0);context.stroke();context.beginPath();context.moveTo(0,-10);context.lineTo(0,10);context.stroke();context.beginPath();context.moveTo(-0.25,-10);context.lineTo(0.25,-10);context.moveTo(-0.25,-9);context.lineTo(0.25,-9);context.moveTo(-0.25,-8);context.lineTo(0.25,-8);context.moveTo(-0.25,-7);context.lineTo(0.25,-7);context.moveTo(-0.25,-6);context.lineTo(0.25,-6);context.moveTo(-0.25,-5);context.lineTo(0.25,-5);context.moveTo(-0.25,-4);context.lineTo(0.25,-4);context.moveTo(-0.25,-3);context.lineTo(0.25,-3);context.moveTo(-0.25,-2);context.lineTo(0.25,-2);context.moveTo(-0.25,-1);context.lineTo(0.25,-1);context.moveTo(-0.25,1);context.lineTo(0.25,1);context.moveTo(-0.25,2);context.lineTo(0.25,2);context.moveTo(-0.25,3);context.lineTo(0.25,3);context.moveTo(-0.25,4);context.lineTo(0.25,4);context.moveTo(-0.25,5);context.lineTo(0.25,5);context.moveTo(-0.25,6);context.lineTo(0.25,6);context.moveTo(-0.25,7);context.lineTo(0.25,7);context.moveTo(-0.25,8);context.lineTo(0.25,8);context.moveTo(-0.25,9);context.lineTo(0.25,9);context.moveTo(-0.25,10);context.lineTo(0.25,10);context.stroke();context.beginPath();context.moveTo(-10,-0.25);context.lineTo(-10,0.25);context.moveTo(-9,-0.25);context.lineTo(-9,0.25);context.moveTo(-8,-0.25);context.lineTo(-8,0.25);context.moveTo(-7,-0.25);context.lineTo(-7,0.25);context.moveTo(-6,-0.25);context.lineTo(-6,0.25);context.moveTo(-5,-0.25);context.lineTo(-5,0.25);context.moveTo(-4,-0.25);context.lineTo(-4,0.25);context.moveTo(-3,-0.25);context.lineTo(-3,0.25);context.moveTo(-2,-0.25);context.lineTo(-2,0.25);context.moveTo(-1,-0.25);context.lineTo(-1,0.25);context.moveTo(1,-0.25);context.lineTo(1,0.25);context.moveTo(2,-0.25);context.lineTo(2,0.25);context.moveTo(3,-0.25);context.lineTo(3,0.25);context.moveTo(4,-0.25);context.lineTo(4,0.25);context.moveTo(5,-0.25);context.lineTo(5,0.25);context.moveTo(6,-0.25);context.lineTo(6,0.25);context.moveTo(7,-0.25);context.lineTo(7,0.25);context.moveTo(8,-0.25);context.lineTo(8,0.25);context.moveTo(9,-0.25);context.lineTo(9,0.25);context.moveTo(10,-0.25);context.lineTo(10,0.25);context.stroke();context.beginPath();context.moveTo(-0.9,-0.1);context.lineTo(-0.9,0.1);context.moveTo(-0.8,-0.1);context.lineTo(-0.8,0.1);context.moveTo(-0.7,-0.1);context.lineTo(-0.7,0.1);context.moveTo(-0.6,-0.1);context.lineTo(-0.6,0.1);context.moveTo(-0.5,-0.1);context.lineTo(-0.5,0.1);context.moveTo(-0.4,-0.1);context.lineTo(-0.4,0.1);context.moveTo(-0.3,-0.1);context.lineTo(-0.3,0.1);context.moveTo(-0.2,-0.1);context.lineTo(-0.2,0.1);context.moveTo(-0.1,-0.1);context.lineTo(-0.1,0.1);context.moveTo(0.1,-0.1);context.lineTo(0.1,0.1);context.moveTo(0.2,-0.1);context.lineTo(0.2,0.1);context.moveTo(0.3,-0.1);context.lineTo(0.3,0.1);context.moveTo(0.4,-0.1);context.lineTo(0.4,0.1);context.moveTo(0.5,-0.1);context.lineTo(0.5,0.1);context.moveTo(0.6,-0.1);context.lineTo(0.6,0.1);context.moveTo(0.7,-0.1);context.lineTo(0.7,0.1);context.moveTo(0.8,-0.1);context.lineTo(0.8,0.1);context.moveTo(0.9,-0.1);context.lineTo(0.9,0.1);context.lineWidth=0.01;context.stroke();context.restore()};function FlockingAnimation(canvas,EDITMODE=!1)
{this.canvas=canvas;this.context=canvas.getContext("2d");this.flock;this.EDITMODE;this.GRID;this.scenewidth;this.dt=1.0;this.size;this.quantity;this.separationweight;this.alignmentweight;this.cohesionweight;this.visualrepresentation;this.ORIENTEDTOWARDSMOVEMENT;this.color;this.initParams(EDITMODE);this.initSimulation()}
FlockingAnimation.prototype.initParams=function(EDITMODE=!1,settings)
{this.EDITMODE=EDITMODE;this.GRID=EDITMODE;this.scenewidth=400;this.size=5;this.quantity=200;this.separationweight=1.5;this.alignmentweight=1.0;this.cohesionweight=1.0;this.visualrepresentation="triangle";this.ORIENTEDTOWARDSMOVEMENT=!0;this.color="#000000";if(typeof eptfgSettingsFlocking!=="undefined")
{if(typeof eptfgSettingsFlocking.EDITMODE!=="undefined")
{if(eptfgSettingsFlocking.EDITMODE=="true")
{this.EDITMODE=!0}
else if(eptfgSettingsFlocking.EDITMODE=="false")
{this.EDITMODE=!1}}
    if(typeof eptfgSettingsFlocking.GRID!=="undefined")
    {if(eptfgSettingsFlocking.GRID=="true")
    {this.GRID=!0}
    else if(eptfgSettingsFlocking.GRID=="false")
    {this.GRID=!1}}
    this.scenewidth=(typeof eptfgSettingsFlocking.scenewidth!=="undefined")?(1.0*eptfgSettingsFlocking.scenewidth):this.scenewidth;this.size=(typeof eptfgSettingsFlocking.size!=="undefined")?(1.0*eptfgSettingsFlocking.size):this.size;this.quantity=(typeof eptfgSettingsFlocking.quantity!=="undefined")?(1*eptfgSettingsFlocking.quantity):this.quantity;this.separationweight=(typeof eptfgSettingsFlocking.separationweight!=="undefined")?(1.0*eptfgSettingsFlocking.separationweight):this.separationweight;this.alignmentweight=(typeof eptfgSettingsFlocking.alignmentweight!=="undefined")?(1.0*eptfgSettingsFlocking.alignmentweight):this.alignmentweight;this.cohesionweight=(typeof eptfgSettingsFlocking.cohesionweight!=="undefined")?(1.0*eptfgSettingsFlocking.cohesionweight):this.cohesionweight;var visualrepresentation=(typeof eptfgSettingsFlocking.visualrepresentation!=="undefined")?eptfgSettingsFlocking.visualrepresentation:this.visualrepresentation;if(visualrepresentation=="image"&&typeof eptfgSettingsFlocking.image!=="undefined"&&eptfgSettingsFlocking.image!="")
    {this.visualrepresentation=new Image();this.visualrepresentation.src=eptfgSettingsFlocking.image}
    else{this.visualrepresentation=(typeof eptfgSettingsFlocking.shape!=="undefined")?eptfgSettingsFlocking.shape:this.visualrepresentation}
    if(typeof eptfgSettingsFlocking.ORIENTED!=="undefined")
    {if(eptfgSettingsFlocking.ORIENTED=="true")
    {this.oriented=!0}
    else if(eptfgSettingsFlocking.ORIENTED=="false")
    {this.oriented=!1}}
    this.color=(typeof eptfgSettingsFlocking.color!=="undefined")?eptfgSettingsFlocking.color:this.color}
    if(typeof settings!=="undefined")
    {this.scenewidth=(typeof settings.scenewidth!=="undefined")?settings.scenewidth:this.scenewidth;this.size=(typeof settings.size!=="undefined")?settings.size:this.size;this.quantity=(typeof settings.quantity!=="undefined")?settings.quantity:this.quantity;this.separationweight=(typeof settings.separationweight!=="undefined")?settings.separationweight:this.separationweight;this.alignmentweight=(typeof settings.alignmentweight!=="undefined")?settings.alignmentweight:this.alignmentweight;this.cohesionweight=(typeof settings.cohesionweight!=="undefined")?settings.cohesionweight:this.cohesionweight;this.visualrepresentation=(typeof settings.visualrepresentation!=="undefined")?settings.visualrepresentation:this.visualrepresentation;this.ORIENTEDTOWARDSMOVEMENT=(typeof settings.ORIENTEDTOWARDSMOVEMENT!=="undefined")?settings.ORIENTEDTOWARDSMOVEMENT:this.ORIENTEDTOWARDSMOVEMENT;this.color=(typeof settings.color!=="undefined")?settings.color:this.color}};FlockingAnimation.prototype.initSimulation=function()
{this.flock=new Flock(this.size*Flock.desiredseparationtoradiusratio,this.size*Flock.neighbourdistancetoradiusratio,this.separationweight,this.alignmentweight,this.cohesionweight);for(var i=0;i<this.quantity;i++)
{var angle=getRandomBetween(0,2*Math.PI);this.flock.addBoid(new Boid(this.visualrepresentation,this.size,new Vector(0,0),new Vector(Math.cos(angle),Math.sin(angle)),new Vector(),2,0.03,this.ORIENTEDTOWARDSMOVEMENT));this.flock.boids[i].color=this.color}
    this.currentTime=Date.now()};FlockingAnimation.prototype.draw=function()
{var previousTime=this.currentTime;this.currentTime=Date.now();this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.save();var zoom=this.canvas.width/this.scenewidth;this.context.setTransform(zoom,0,0,zoom,this.canvas.width/2,this.canvas.height/2);if(this.GRID)FlockingAnimation.drawGrid(this.context,this.scenewidth);this.flock.run(this.dt,-this.scenewidth/2,this.scenewidth/2,-this.scenewidth*this.canvas.height/this.canvas.width/2,this.scenewidth*this.canvas.height/this.canvas.width/2);this.flock.display(this.context);this.context.restore();if(this.EDITMODE)
{this.context.save();this.context.globalAlpha=1;this.context.strokeStyle="#000000";this.context.lineWidth=2;this.context.beginPath();this.context.moveTo(this.canvas.width-15,this.canvas.height-3);this.context.lineTo(this.canvas.width-3,this.canvas.height-3);this.context.lineTo(this.canvas.width-3,this.canvas.height-15);this.context.moveTo(this.canvas.width-15,this.canvas.height-8);this.context.lineTo(this.canvas.width-8,this.canvas.height-8);this.context.lineTo(this.canvas.width-8,this.canvas.height-15);this.context.stroke();this.context.restore()}};FlockingAnimation.drawGrid=function(context,scenewidth)
{context.save();context.lineWidth=1;context.strokeStyle="#000000";context.beginPath();context.moveTo(-scenewidth/2,0);context.lineTo(scenewidth/2,0);context.stroke();context.beginPath();context.moveTo(0,-scenewidth/2);context.lineTo(0,scenewidth/2);context.stroke();context.strokeStyle="#444444";context.lineWidth=0.6;for(var i=100;i<scenewidth/2;i+=100)
{context.beginPath();context.moveTo(i,-scenewidth/2);context.lineTo(i,scenewidth/2);context.stroke()}
    for(var i=-100;i>-scenewidth/2;i-=100)
    {context.beginPath();context.moveTo(i,-scenewidth/2);context.lineTo(i,scenewidth/2);context.stroke()}
    for(var i=100;i<scenewidth/2;i+=100)
    {context.beginPath();context.moveTo(-scenewidth/2,i);context.lineTo(scenewidth/2,i);context.stroke()}
    for(var i=-100;i>-scenewidth/2;i-=100)
    {context.beginPath();context.moveTo(-scenewidth/2,i);context.lineTo(scenewidth/2,i);context.stroke()}
    context.strokeStyle="#AAAAAA";context.lineWidth=0.05;for(var i=10;i<scenewidth/2;i+=10)
    {context.beginPath();context.moveTo(i,-scenewidth/2);context.lineTo(i,scenewidth/2);context.stroke()}
    for(var i=-10;i>-scenewidth/2;i-=10)
    {context.beginPath();context.moveTo(i,-scenewidth/2);context.lineTo(i,scenewidth/2);context.stroke()}
    for(var i=10;i<scenewidth/2;i+=10)
    {context.beginPath();context.moveTo(-scenewidth/2,i);context.lineTo(scenewidth/2,i);context.stroke()}
    for(var i=-10;i>-scenewidth/2;i-=10)
    {context.beginPath();context.moveTo(-scenewidth/2,i);context.lineTo(scenewidth/2,i);context.stroke()}
    context.restore()};function SteeringAnimation(canvas,EDITMODE=!1)
{this.canvas=canvas;this.context=canvas.getContext("2d");this.hunter;this.gatherer;this.target;this.EDITMODE;this.GRID;this.SHOWPURSUEDISTANCE;this.SHOWSEEKDISTANCE;this.SHOWEVADEDISTANCE;this.scenewidth;this.EXISTS_hunter;this.EXISTS_gatherer;this.EXISTS_target;this.dt=1.0;this.size;this.pursuedistance;this.seekdistance;this.evadedistance;this.pursueweight;this.seekweight;this.evadeweight;this.visualrepresentation_hunter;this.ORIENTEDTOWARDSMOVEMENT_hunter;this.color_hunter;this.visualrepresentation_gatherer;this.ORIENTEDTOWARDSMOVEMENT_gatherer;this.color_gatherer;this.visualrepresentation_target;this.color_target;this.initParams(EDITMODE);this.initSimulation()}
SteeringAnimation.prototype.initParams=function(EDITMODE=!1,settings)
{this.EDITMODE=EDITMODE;this.GRID=EDITMODE;this.SHOWPURSUEDISTANCE=!1;this.SHOWSEEKDISTANCE=!1;this.SHOWEVADEDISTANCE=!1;this.scenewidth=400;this.EXISTS_hunter=!0;this.EXISTS_gatherer=!0;this.EXISTS_target=!0;this.size=5;this.pursuedistance=50;this.seekdistance=50;this.evadedistance=50;this.pursueweight=1.0;this.seekweight=1.0;this.evadeweight=1.0;this.visualrepresentation_hunter="triangle";this.ORIENTEDTOWARDSMOVEMENT_hunter=!0;this.color_hunter="#000000";this.visualrepresentation_gatherer="circle";this.ORIENTEDTOWARDSMOVEMENT_gatherer=!0;this.color_gatherer="#000000";this.visualrepresentation_target="square";this.color_target="#000000";if(typeof eptfgSettingsSteering!=="undefined")
{if(typeof eptfgSettingsSteering.EDITMODE!=="undefined")
{if(eptfgSettingsSteering.EDITMODE=="true")
{this.EDITMODE=!0}
else if(eptfgSettingsSteering.EDITMODE=="false")
{this.EDITMODE=!1}}
    if(typeof eptfgSettingsSteering.GRID!=="undefined")
    {if(eptfgSettingsSteering.GRID=="true")
    {this.GRID=!0}
    else if(eptfgSettingsSteering.GRID=="false")
    {this.GRID=!1}}
    if(typeof eptfgSettingsSteering.SHOWPURSUEDISTANCE!=="undefined")
    {if(eptfgSettingsSteering.SHOWPURSUEDISTANCE=="true")
    {this.SHOWPURSUEDISTANCE=!0}
    else if(eptfgSettingsSteering.SHOWPURSUEDISTANCE=="false")
    {this.SHOWPURSUEDISTANCE=!1}}
    if(typeof eptfgSettingsSteering.SHOWSEEKDISTANCE!=="undefined")
    {if(eptfgSettingsSteering.SHOWSEEKDISTANCE=="true")
    {this.SHOWSEEKDISTANCE=!0}
    else if(eptfgSettingsSteering.SHOWSEEKDISTANCE=="false")
    {this.SHOWSEEKDISTANCE=!1}}
    if(typeof eptfgSettingsSteering.SHOW_EVADEDISTANCE!=="undefined")
    {if(eptfgSettingsSteering.SHOW_EVADEDISTANCE=="true")
    {this.SHOW_EVADEDISTANCE=!0}
    else if(eptfgSettingsSteering.SHOW_EVADEDISTANCE=="false")
    {this.SHOW_EVADEDISTANCE=!1}}
    this.scenewidth=(typeof eptfgSettingsSteering.scenewidth!=="undefined")?(1.0*eptfgSettingsSteering.scenewidth):this.scenewidth;if(typeof eptfgSettingsSteering.EXISTS_hunter!=="undefined")
    {if(eptfgSettingsSteering.EXISTS_hunter=="true")
    {this.EXISTS_hunter=!0}
    else if(eptfgSettingsSteering.EXISTS_hunter=="false")
    {this.EXISTS_hunter=!1}}
    if(typeof eptfgSettingsSteering.EXISTS_gatherer!=="undefined")
    {if(eptfgSettingsSteering.EXISTS_gatherer=="true")
    {this.EXISTS_gatherer=!0}
    else if(eptfgSettingsSteering.EXISTS_gatherer=="false")
    {this.EXISTS_gatherer=!1}}
    if(typeof eptfgSettingsSteering.EXISTS_target!=="undefined")
    {if(eptfgSettingsSteering.EXISTS_target=="true")
    {this.EXISTS_target=!0}
    else if(eptfgSettingsSteering.EXISTS_target=="false")
    {this.EXISTS_target=!1}}
    this.size=(typeof eptfgSettingsSteering.size!=="undefined")?(1.0*eptfgSettingsSteering.size):this.size;this.pursuedistance=(typeof eptfgSettingsSteering.pursuedistance!=="undefined")?(1.0*eptfgSettingsSteering.pursuedistance):this.pursuedistance;this.seekdistance=(typeof eptfgSettingsSteering.seekdistance!=="undefined")?(1.0*eptfgSettingsSteering.seekdistance):this.size;this.evadedistance=(typeof eptfgSettingsSteering.evadedistance!=="undefined")?(1*eptfgSettingsSteering.evadedistance):this.evadedistance;this.pursueweight=(typeof eptfgSettingsSteering.pursueweight!=="undefined")?(1.0*eptfgSettingsSteering.pursueweight):this.pursueweight;this.seekweight=(typeof eptfgSettingsSteering.seekweight!=="undefined")?(1.0*eptfgSettingsSteering.seekweight):this.size;this.evadeweight=(typeof eptfgSettingsSteering.evadeweight!=="undefined")?(1*eptfgSettingsSteering.evadeweight):this.evadeweight;var visualrepresentation_hunter=(typeof eptfgSettingsSteering.visualrepresentation_hunter!=="undefined")?eptfgSettingsSteering.visualrepresentation_hunter:this.visualrepresentation_hunter;if(visualrepresentation_hunter=="image"&&typeof eptfgSettingsSteering.image_hunter!=="undefined"&&eptfgSettingsSteering.image_hunter!="")
    {this.visualrepresentation_hunter=new Image();this.visualrepresentation_hunter.src=eptfgSettingsSteering.image_hunter}
    else{this.visualrepresentation_hunter=(typeof eptfgSettingsSteering.shape_hunter!=="undefined")?eptfgSettingsSteering.shape_hunter:this.visualrepresentation_hunter}
    var visualrepresentation_gatherer=(typeof eptfgSettingsSteering.visualrepresentation_gatherer!=="undefined")?eptfgSettingsSteering.visualrepresentation_gatherer:this.visualrepresentation_gatherer;if(visualrepresentation_gatherer=="image"&&typeof eptfgSettingsSteering.image_gatherer!=="undefined"&&eptfgSettingsSteering.image_gatherer!="")
    {this.visualrepresentation_gatherer=new Image();this.visualrepresentation_gatherer.src=eptfgSettingsSteering.image_gatherer}
    else{this.visualrepresentation_gatherer=(typeof eptfgSettingsSteering.shape_gatherer!=="undefined")?eptfgSettingsSteering.shape_gatherer:this.visualrepresentation_gatherer}
    var visualrepresentation_target=(typeof eptfgSettingsSteering.visualrepresentation_target!=="undefined")?eptfgSettingsSteering.visualrepresentation_target:this.visualrepresentation_target;if(visualrepresentation_target=="image"&&typeof eptfgSettingsSteering.image_target!=="undefined"&&eptfgSettingsSteering.image_target!="")
    {this.visualrepresentation_target=new Image();this.visualrepresentation_target.src=eptfgSettingsSteering.image_target}
    else{this.visualrepresentation_target=(typeof eptfgSettingsSteering.shape_target!=="undefined")?eptfgSettingsSteering.shape_target:this.visualrepresentation_target}
    if(typeof eptfgSettingsSteering.ORIENTED_hunter!=="undefined")
    {if(eptfgSettingsSteering.ORIENTED_hunter=="true")
    {this.oriented_hunter=!0}
    else if(eptfgSettingsSteering.ORIENTED_hunter=="false")
    {this.oriented_hunter=!1}}
    if(typeof eptfgSettingsSteering.ORIENTED_gatherer!=="undefined")
    {if(eptfgSettingsSteering.ORIENTED_gatherer=="true")
    {this.oriented_gatherer=!0}
    else if(eptfgSettingsSteering.ORIENTED_gatherer=="false")
    {this.oriented_gatherer=!1}}
    this.color_hunter=(typeof eptfgSettingsSteering.color_hunter!=="undefined")?eptfgSettingsSteering.color_hunter:this.color_hunter;this.color_gatherer=(typeof eptfgSettingsSteering.color_gatherer!=="undefined")?eptfgSettingsSteering.color_gatherer:this.color_gatherer;this.color_target=(typeof eptfgSettingsSteering.color_target!=="undefined")?eptfgSettingsSteering.color_target:this.color_target}
    if(typeof settings!=="undefined")
    {this.scenewidth=(typeof settings.scenewidth!=="undefined")?settings.scenewidth:this.scenewidth;this.EXISTS_hunter=(typeof settings.EXISTS_hunter!=="undefined")?settings.EXISTS_hunter:this.EXISTS_hunter;this.EXISTS_gatherer=(typeof settings.EXISTS_gatherer!=="undefined")?settings.EXISTS_gatherer:this.EXISTS_gatherer;this.EXISTS_target=(typeof settings.EXISTS_target!=="undefined")?settings.EXISTS_target:this.EXISTS_target;this.size=(typeof settings.size!=="undefined")?settings.size:this.size;this.pursuedistance=(typeof settings.pursuedistance!=="undefined")?settings.pursuedistance:this.pursuedistance;this.seekdistance=(typeof settings.seekdistance!=="undefined")?settings.seekdistance:this.seekdistance;this.evadedistance=(typeof settings.evadedistance!=="undefined")?settings.evadedistance:this.evadedistance;this.pursueweight=(typeof settings.pursueweight!=="undefined")?settings.pursueweight:this.pursueweight;this.seekweight=(typeof settings.seekweight!=="undefined")?settings.seekweight:this.seekweight;this.evadeweight=(typeof settings.evadeweight!=="undefined")?settings.evadeweight:this.evadeweight;this.visualrepresentation_hunter=(typeof settings.visualrepresentation_hunter!=="undefined")?settings.visualrepresentation_hunter:this.visualrepresentation_hunter;this.ORIENTEDTOWARDSMOVEMENT_hunter=(typeof settings.ORIENTEDTOWARDSMOVEMENT_hunter!=="undefined")?settings.ORIENTEDTOWARDSMOVEMENT_hunter:this.ORIENTEDTOWARDSMOVEMENT_hunter;this.color_hunter=(typeof settings.color_hunter!=="undefined")?settings.color_hunter:this.color_hunter;this.visualrepresentation_gatherer=(typeof settings.visualrepresentation_gatherer!=="undefined")?settings.visualrepresentation_gatherer:this.visualrepresentation_gatherer;this.ORIENTEDTOWARDSMOVEMENT_gatherer=(typeof settings.ORIENTEDTOWARDSMOVEMENT_gatherer!=="undefined")?settings.ORIENTEDTOWARDSMOVEMENT_gatherer:this.ORIENTEDTOWARDSMOVEMENT_gatherer;this.color_gatherer=(typeof settings.color_gatherer!=="undefined")?settings.color_gatherer:this.color_gatherer;this.visualrepresentation_target=(typeof settings.visualrepresentation_target!=="undefined")?settings.visualrepresentation_target:this.visualrepresentation_target;this.ORIENTEDTOWARDSMOVEMENT_target=(typeof settings.ORIENTEDTOWARDSMOVEMENT_target!=="undefined")?settings.ORIENTEDTOWARDSMOVEMENT_target:this.ORIENTEDTOWARDSMOVEMENT_target;this.color_target=(typeof settings.color_target!=="undefined")?settings.color_target:this.color_target}};SteeringAnimation.prototype.initSimulation=function()
{var worldHeight=this.scenewidth*this.canvas.height/this.canvas.width;if(this.EXISTS_hunter)
{this.hunter=new Boid(this.visualrepresentation_hunter,this.size,new Vector(getRandomBetween(-this.scenewidth/2,this.scenewidth/2),getRandomBetween(-worldHeight/2,worldHeight/2)),new Vector(),new Vector(),2,0.03,this.ORIENTEDTOWARDSMOVEMENT_hunter);this.hunter.color=this.color_hunter}
else{this.hunter=null}
    if(this.EXISTS_gatherer)
    {this.gatherer=new Boid(this.visualrepresentation_gatherer,this.size,new Vector(getRandomBetween(-this.scenewidth/2,this.scenewidth/2),getRandomBetween(-worldHeight/2,worldHeight/2)),new Vector(),new Vector(),2,0.03,this.ORIENTEDTOWARDSMOVEMENT_gatherer);this.gatherer.color=this.color_gatherer}
    else{this.gatherer=null}
    if(this.EXISTS_target)
    {this.target=new Vector(getRandomBetween(-this.scenewidth/2,this.scenewidth/2),getRandomBetween(-worldHeight/2,worldHeight/2))}
    else{this.target=null}
    this.currentTime=Date.now()};SteeringAnimation.prototype.draw=function()
{var previousTime=this.currentTime;this.currentTime=Date.now();this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.save();var zoom=this.canvas.width/this.scenewidth;this.context.setTransform(zoom,0,0,zoom,this.canvas.width/2,this.canvas.height/2);if(this.GRID)SteeringAnimation.drawGrid(this.context,this.scenewidth);if(!(typeof(this.gatherer)==="undefined"||this.gatherer===null))
{var targetDoesntExistOrIsFar=!0;var hunterDoesntExistOrIsFar=!0;if(!(typeof(this.target)==="undefined"||this.target===null))
{if(Vector.dist(this.gatherer.location,this.target)<=this.seekdistance)
{targetDoesntExistOrIsFar=!1;var seek=this.gatherer.seekIfNear(this.target,this.seekdistance);seek.mult(this.seekweight);this.gatherer.applyForce(seek)}}
    if(!(typeof(this.hunter)==="undefined"||this.hunter===null))
    {if(Vector.dist(this.gatherer.location,this.hunter.location)<=this.evadedistance)
    {hunterDoesntExistOrIsFar=!1;var evade=this.gatherer.evadeIfNear(this.hunter,this.evadedistance,this.dt);evade.mult(this.evadeweight);this.gatherer.applyForce(evade)}}
    if(targetDoesntExistOrIsFar&&hunterDoesntExistOrIsFar)
    {var wander=this.gatherer.wander();this.gatherer.applyForce(wander)}}
    if(!(typeof(this.hunter)==="undefined"||this.hunter===null))
    {var gathererDoesntExistOrIsFar=!0;if(!(typeof(this.gatherer)==="undefined"||this.gatherer===null))
    {if(Vector.dist(this.hunter.location,this.gatherer.location)<=this.pursuedistance)
    {gathererDoesntExistOrIsFar=!1;var pursue=this.hunter.pursueIfNear(this.gatherer,this.pursuedistance,this.dt);pursue.mult(this.pursueweight);this.hunter.applyForce(pursue)}}
        if(gathererDoesntExistOrIsFar)
        {var wander=this.hunter.wander();this.hunter.applyForce(wander)}}
    if(!(typeof(this.gatherer)==="undefined"||this.gatherer===null))this.gatherer.update(this.dt);if(!(typeof(this.hunter)==="undefined"||this.hunter===null))this.hunter.update(this.dt);if(!(typeof(this.gatherer)==="undefined"||this.gatherer===null)&&!(typeof(this.target)==="undefined"||this.target===null)&&Vector.dist(this.gatherer.location,this.target)<this.gatherer.radius*2)
    {this.target.x=getRandomBetween(-this.scenewidth/2,this.scenewidth/2);this.target.y=getRandomBetween(-this.scenewidth*this.canvas.height/this.canvas.width/2,this.scenewidth*this.canvas.height/this.canvas.width/2)}
    if(!(typeof(this.gatherer)==="undefined"||this.gatherer===null))
    {this.gatherer.borders(-this.scenewidth/2,this.scenewidth/2,-this.scenewidth*this.canvas.height/this.canvas.width/2,this.scenewidth*this.canvas.height/this.canvas.width/2)}
    if(!(typeof(this.hunter)==="undefined"||this.hunter===null))
    {this.hunter.borders(-this.scenewidth/2,this.scenewidth/2,-this.scenewidth*this.canvas.height/this.canvas.width/2,this.scenewidth*this.canvas.height/this.canvas.width/2)}
    if(!(typeof(this.target)==="undefined"||this.target===null))
    {if(!(typeof(this.gatherer)==="undefined"||this.gatherer===null)&&this.SHOWSEEKDISTANCE)
    {this.context.save();this.context.fillStyle=this.color_target;this.context.globalAlpha=0.25;this.context.beginPath();this.context.arc(this.target.x,this.target.y,this.seekdistance,0,2*Math.PI)
        this.context.fill();this.context.restore()}
        SteeringAnimation.drawTarget(this.target,this.size,this.visualrepresentation_target,this.color_target,this.context)}
    if(!(typeof(this.gatherer)==="undefined"||this.gatherer===null))
    {if(this.SHOWEVADEDISTANCE)
    {this.context.save();this.context.fillStyle=this.gatherer.color;this.context.globalAlpha=0.25;this.context.beginPath();this.context.arc(this.gatherer.location.x,this.gatherer.location.y,this.evadedistance,0,2*Math.PI)
        this.context.fill();this.context.restore()}
        this.gatherer.display(this.context)}
    if(!(typeof(this.hunter)==="undefined"||this.hunter===null))
    {if(this.SHOWPURSUEDISTANCE)
    {this.context.save();this.context.fillStyle=this.hunter.color;this.context.globalAlpha=0.25;this.context.beginPath();this.context.arc(this.hunter.location.x,this.hunter.location.y,this.pursuedistance,0,2*Math.PI)
        this.context.fill();this.context.restore()}
        this.hunter.display(this.context)}
    this.context.restore();if(this.EDITMODE)
    {this.context.save();this.context.globalAlpha=1;this.context.strokeStyle="#000000";this.context.lineWidth=2;this.context.beginPath();this.context.moveTo(this.canvas.width-15,this.canvas.height-3);this.context.lineTo(this.canvas.width-3,this.canvas.height-3);this.context.lineTo(this.canvas.width-3,this.canvas.height-15);this.context.moveTo(this.canvas.width-15,this.canvas.height-8);this.context.lineTo(this.canvas.width-8,this.canvas.height-8);this.context.lineTo(this.canvas.width-8,this.canvas.height-15);this.context.stroke();this.context.restore()}};SteeringAnimation.drawTarget=function(location,radius,visualrepresentation,color,context)
{context.save();context.fillStyle=color;if(typeof(visualrepresentation)=="string")
{switch(visualrepresentation)
    {case "square":context.fillRect(location.x-radius,location.y-radius,2*radius,2*radius);break;case "circle":context.beginPath();context.arc(location.x,location.y,radius,0,2*Math.PI);context.closePath();context.fill();break;case "triangle":context.save();context.transform(1,0,0,1,location.x,location.y);context.beginPath();context.moveTo(radius,0);context.lineTo(-radius,-3*radius/5);context.lineTo(-radius,3*radius/5);context.closePath();context.fill();context.restore();break;default:context.beginPath();context.arc(location.x,location.y,radius,0,2*Math.PI,!1);context.closePath();context.fill()}}
else if(visualrepresentation instanceof Image)
{context.save();context.transform(1,0,0,1,location.x,location.y);context.drawImage(visualrepresentation,-radius,-radius,2*radius,2*radius);context.restore()}
else{context.beginPath();context.arc(location.x,location.y,radius,0,2*Math.PI);context.closePath();context.fill()}
    context.restore()}
SteeringAnimation.drawGrid=function(context,scenewidth)
{context.save();context.lineWidth=1;context.strokeStyle="#000000";context.beginPath();context.moveTo(-scenewidth/2,0);context.lineTo(scenewidth/2,0);context.stroke();context.beginPath();context.moveTo(0,-scenewidth/2);context.lineTo(0,scenewidth/2);context.stroke();context.strokeStyle="#444444";context.lineWidth=0.6;for(var i=100;i<scenewidth/2;i+=100)
{context.beginPath();context.moveTo(i,-scenewidth/2);context.lineTo(i,scenewidth/2);context.stroke()}
    for(var i=-100;i>-scenewidth/2;i-=100)
    {context.beginPath();context.moveTo(i,-scenewidth/2);context.lineTo(i,scenewidth/2);context.stroke()}
    for(var i=100;i<scenewidth/2;i+=100)
    {context.beginPath();context.moveTo(-scenewidth/2,i);context.lineTo(scenewidth/2,i);context.stroke()}
    for(var i=-100;i>-scenewidth/2;i-=100)
    {context.beginPath();context.moveTo(-scenewidth/2,i);context.lineTo(scenewidth/2,i);context.stroke()}
    context.strokeStyle="#AAAAAA";context.lineWidth=0.05;for(var i=10;i<scenewidth/2;i+=10)
    {context.beginPath();context.moveTo(i,-scenewidth/2);context.lineTo(i,scenewidth/2);context.stroke()}
    for(var i=-10;i>-scenewidth/2;i-=10)
    {context.beginPath();context.moveTo(i,-scenewidth/2);context.lineTo(i,scenewidth/2);context.stroke()}
    for(var i=10;i<scenewidth/2;i+=10)
    {context.beginPath();context.moveTo(-scenewidth/2,i);context.lineTo(scenewidth/2,i);context.stroke()}
    for(var i=-10;i>-scenewidth/2;i-=10)
    {context.beginPath();context.moveTo(-scenewidth/2,i);context.lineTo(scenewidth/2,i);context.stroke()}
    context.restore()}
